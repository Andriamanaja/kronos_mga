import { Inject, Injectable, NgModule, defineInjectable, inject } from '@angular/core';
import { HttpClient, HttpHeaders } from '@angular/common/http';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class Cookies {
    constructor() {
        this.session_id = null;
    }
    /**
     * @return {?}
     */
    delete_sessionId() {
        this.session_id = null;
        document.cookie = 'session_id=; expires=Wed, 29 Jun 2016 00:00:00 UTC';
    }
    /**
     * @return {?}
     */
    get_sessionId() {
        return document
            .cookie.split('; ')
            .filter(x => x.indexOf('session_id') === 0)
            .map(x => x.split('=')[1])
            .pop() || this.session_id || '';
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set_sessionId(val) {
        document.cookie = `session_id=${val}`;
        this.session_id = val;
    }
}
class Ng6OdooRPCService {
    /**
     * @param {?} http
     */
    constructor(http) {
        this.http = http;
        this.uniq_id_counter = 0;
        this.shouldManageSessionId = false;
        this.context = JSON.parse(localStorage.getItem('user_context')) || { 'lang': 'en_US' };
        this.cookies = new Cookies();
    }
    /**
     * @param {?} configs
     * @return {?}
     */
    init(configs) {
        this.odoo_server = configs.odoo_server;
        this.http_auth = configs.http_auth || null;
    }
    /**
     * @param {?} odoo_server
     * @return {?}
     */
    setOdooServer(odoo_server) {
        this.odoo_server = odoo_server;
    }
    /**
     * @param {?} http_auth
     * @return {?}
     */
    setHttpAuth(http_auth) {
        this.http_auth = http_auth;
    }
    /**
     * @param {?} url
     * @param {?} params
     * @return {?}
     */
    sendRequest(url, params) {
        const /** @type {?} */ body = this.buildRequest(url, params);
        return this.http.post(this.odoo_server + url, body, { headers: this.headers })
            .toPromise()
            .then(this.handleOdooErrors)
            .catch(this.handleHttpErrors);
    }
    /**
     * @return {?}
     */
    getServerInfo() {
        return this.sendRequest('/web/webclient/version_info', {});
    }
    /**
     * @return {?}
     */
    getSessionInfo() {
        return this.sendRequest('/web/session/get_session_info', {});
    }
    /**
     * @param {?} db
     * @param {?} login
     * @param {?} password
     * @return {?}
     */
    login(db, login, password) {
        const /** @type {?} */ params = {
            db: db,
            login: login,
            password: password
        };
        const /** @type {?} */ $this = this;
        return this.sendRequest('/web/session/authenticate', params).then(function (result) {
            if (!result.uid) {
                $this.cookies.delete_sessionId();
                return Promise.reject({
                    title: 'wrong_login',
                    message: 'Username and password don\'t match',
                    fullTrace: result
                });
            }
            $this.context = result.user_context;
            localStorage.setItem('user_context', JSON.stringify($this.context));
            $this.cookies.set_sessionId(result.session_id);
            return result;
        });
    }
    /**
     * @param {?=} force
     * @return {?}
     */
    isLoggedIn(force = true) {
        if (!force) {
            return Promise.resolve(this.cookies.get_sessionId().length > 0);
        }
        return this.getSessionInfo().then((result) => {
            this.cookies.set_sessionId(result.session_id);
            return !!(result.uid);
        });
    }
    /**
     * @param {?=} force
     * @return {?}
     */
    logout(force = true) {
        this.cookies.delete_sessionId();
        if (force) {
            return this.getSessionInfo().then((r) => {
                // get db from sessionInfo
                if (r.db) {
                    return this.login(r.db, '', '');
                }
            });
        }
        else {
            return Promise.resolve();
        }
    }
    /**
     * @return {?}
     */
    getDbList() {
        // only use for odoo < 9.0
        return this.sendRequest('/web/database/get_list', {});
    }
    /**
     * @param {?} model
     * @param {?} domain
     * @param {?} fields
     * @param {?} limit
     * @param {?} offset
     * @param {?=} context
     * @param {?=} sort
     * @return {?}
     */
    searchRead(model, domain, fields, limit, offset, context = {}, sort) {
        const /** @type {?} */ params = {
            model: model,
            domain: domain,
            fields: fields,
            limit: limit,
            offset: offset,
            context: context || this.context,
            sort: sort || ''
        };
        return this.sendRequest('/web/dataset/search_read', params);
    }
    /**
     * @param {?} context
     * @return {?}
     */
    updateContext(context) {
        localStorage.setItem('user_context', JSON.stringify(context));
        const /** @type {?} */ args = [[(/** @type {?} */ (this.context)).uid], context];
        this.call('res.users', 'write', args, {})
            .then(() => this.context = context)
            .catch((err) => this.context = context);
    }
    /**
     * @return {?}
     */
    getContext() {
        return this.context;
    }
    /**
     * @return {?}
     */
    getServer() {
        return this.odoo_server;
    }
    /**
     * @param {?} model
     * @param {?} method
     * @param {?} args
     * @param {?} kwargs
     * @return {?}
     */
    call(model, method, args, kwargs) {
        kwargs = kwargs || {};
        kwargs.context = kwargs.context || {};
        (/** @type {?} */ (Object)).assign(kwargs.context, this.context);
        const /** @type {?} */ params = {
            model: model,
            method: method,
            args: args,
            kwargs: kwargs,
        };
        return this.sendRequest('/web/dataset/call_kw', params);
    }
    /**
     * @param {?} url
     * @param {?} params
     * @return {?}
     */
    buildRequest(url, params) {
        this.uniq_id_counter += 1;
        if (this.shouldManageSessionId) {
            params.session_id = this.cookies.get_sessionId();
        }
        this.headers = new HttpHeaders({
            'Content-Type': 'application/json',
            'X-Openerp-Session-Id': this.cookies.get_sessionId(),
            'Authorization': 'Basic ' + btoa(`${this.http_auth}`)
        });
        return JSON.stringify({
            jsonrpc: '2.0',
            method: 'call',
            params: params,
        });
    }
    /**
     * @param {?} response
     * @return {?}
     */
    handleOdooErrors(response) {
        if (!response.error) {
            return response.result;
        }
        const /** @type {?} */ error = response.error;
        const /** @type {?} */ errorObj = {
            title: '    ',
            message: '',
            fullTrace: error
        };
        if (error.code === 200 && error.message === 'Odoo Server Error' && error.data.name === 'werkzeug.exceptions.NotFound') {
            errorObj.title = 'page_not_found';
            errorObj.message = 'HTTP Error';
        }
        else if ((error.code === 100 && error.message === 'Odoo Session Expired') || // v8
            // v8
            (error.code === 300 && error.message === 'OpenERP WebClient Error' && error.data.debug.match('SessionExpiredException')) // v7
        ) {
            errorObj.title = 'session_expired';
            this.cookies.delete_sessionId();
        }
        else if ((error.message === 'Odoo Server Error' && /FATAL:  database "(.+)" does not exist/.test(error.data.message))) {
            errorObj.title = 'database_not_found';
            errorObj.message = error.data.message;
        }
        else if ((error.data.name === 'openerp.exceptions.AccessError')) {
            errorObj.title = 'AccessError';
            errorObj.message = error.data.message;
        }
        else {
            const /** @type {?} */ split = ('' + error.data.fault_code).split('\n')[0].split(' -- ');
            if (split.length > 1) {
                error.type = split.shift();
                error.data.fault_code = error.data.fault_code.substr(error.type.length + 4);
            }
            if (error.code === 200 && error.type) {
                errorObj.title = error.type;
                errorObj.message = error.data.fault_code.replace(/\n/g, '<br />');
            }
            else {
                errorObj.title = error.message;
                errorObj.message = error.data.debug.replace(/\n/g, '<br />');
            }
        }
        return Promise.reject(errorObj);
    }
    /**
     * @param {?} error
     * @return {?}
     */
    handleHttpErrors(error) {
        return Promise.reject(error.message || error);
    }
}
Ng6OdooRPCService.decorators = [
    { type: Injectable, args: [{
                providedIn: 'root'
            },] },
];
/** @nocollapse */
Ng6OdooRPCService.ctorParameters = () => [
    { type: HttpClient, decorators: [{ type: Inject, args: [HttpClient,] }] }
];
/** @nocollapse */ Ng6OdooRPCService.ngInjectableDef = defineInjectable({ factory: function Ng6OdooRPCService_Factory() { return new Ng6OdooRPCService(inject(HttpClient)); }, token: Ng6OdooRPCService, providedIn: "root" });

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class Angular6OdooJsonrpcModule {
}
Angular6OdooJsonrpcModule.decorators = [
    { type: NgModule, args: [{
                imports: [],
            },] },
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

export { Ng6OdooRPCService, Angular6OdooJsonrpcModule };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5ndWxhcjYtb2Rvby1qc29ucnBjLmpzLm1hcCIsInNvdXJjZXMiOlsibmc6Ly9hbmd1bGFyNi1vZG9vLWpzb25ycGMvbGliL2FuZ3VsYXI2LW9kb28tanNvbnJwYy5zZXJ2aWNlLnRzIiwibmc6Ly9hbmd1bGFyNi1vZG9vLWpzb25ycGMvbGliL2FuZ3VsYXI2LW9kb28tanNvbnJwYy5tb2R1bGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtJbmplY3QsIEluamVjdGFibGV9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtIdHRwQ2xpZW50LCBIdHRwSGVhZGVyc30gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuXG5jbGFzcyBDb29raWVzIHsgLy8gY29va2llcyBkb2Vzbid0IHdvcmsgd2l0aCBBbmRyb2lkIGRlZmF1bHQgYnJvd3NlciAvIElvbmljXG4gIHByaXZhdGUgc2Vzc2lvbl9pZDogc3RyaW5nID0gbnVsbDtcblxuICBkZWxldGVfc2Vzc2lvbklkKCkge1xuICAgIHRoaXMuc2Vzc2lvbl9pZCA9IG51bGw7XG4gICAgZG9jdW1lbnQuY29va2llID0gJ3Nlc3Npb25faWQ9OyBleHBpcmVzPVdlZCwgMjkgSnVuIDIwMTYgMDA6MDA6MDAgVVRDJztcbiAgfVxuXG4gIGdldF9zZXNzaW9uSWQoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50XG4gICAgICAuY29va2llLnNwbGl0KCc7ICcpXG4gICAgICAuZmlsdGVyKHggPT4geC5pbmRleE9mKCdzZXNzaW9uX2lkJykgPT09IDApXG4gICAgICAubWFwKHggPT4geC5zcGxpdCgnPScpWzFdKVxuICAgICAgLnBvcCgpIHx8IHRoaXMuc2Vzc2lvbl9pZCB8fCAnJztcbiAgfVxuXG4gIHNldF9zZXNzaW9uSWQodmFsOiBzdHJpbmcpIHtcbiAgICBkb2N1bWVudC5jb29raWUgPSBgc2Vzc2lvbl9pZD0ke3ZhbH1gO1xuICAgIHRoaXMuc2Vzc2lvbl9pZCA9IHZhbDtcbiAgfVxufVxuXG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIE5nNk9kb29SUENTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBjb29raWVzOiBDb29raWVzO1xuICBwcml2YXRlIHVuaXFfaWRfY291bnRlciA9IDA7XG4gIHByaXZhdGUgc2hvdWxkTWFuYWdlU2Vzc2lvbklkID0gZmFsc2U7IC8vIHRyeSB3aXRob3V0IGZpcnN0XG4gIHByaXZhdGUgY29udGV4dDogT2JqZWN0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcl9jb250ZXh0JykpIHx8IHsnbGFuZyc6ICdlbl9VUyd9O1xuICBwcml2YXRlIGhlYWRlcnM6IEh0dHBIZWFkZXJzO1xuICBwcml2YXRlIGh0dHBfYXV0aDogc3RyaW5nO1xuICBwcml2YXRlIG9kb29fc2VydmVyOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgQEluamVjdChIdHRwQ2xpZW50KSBwcml2YXRlIGh0dHA6IEh0dHBDbGllbnQpIHtcbiAgICB0aGlzLmNvb2tpZXMgPSBuZXcgQ29va2llcygpO1xuICB9XG5cbiAgcHVibGljIGluaXQoY29uZmlnczogYW55KSB7XG4gICAgdGhpcy5vZG9vX3NlcnZlciA9IGNvbmZpZ3Mub2Rvb19zZXJ2ZXI7XG4gICAgdGhpcy5odHRwX2F1dGggPSBjb25maWdzLmh0dHBfYXV0aCB8fCBudWxsO1xuICB9XG5cbiAgcHVibGljIHNldE9kb29TZXJ2ZXIob2Rvb19zZXJ2ZXI6IHN0cmluZykge1xuICAgIHRoaXMub2Rvb19zZXJ2ZXIgPSBvZG9vX3NlcnZlcjtcbiAgfVxuXG4gIHB1YmxpYyBzZXRIdHRwQXV0aChodHRwX2F1dGg6IHN0cmluZykge1xuICAgIHRoaXMuaHR0cF9hdXRoID0gaHR0cF9hdXRoO1xuICB9XG5cbiAgcHVibGljIHNlbmRSZXF1ZXN0KHVybDogc3RyaW5nLCBwYXJhbXM6IE9iamVjdCk6IFByb21pc2U8YW55PiB7XG4gICAgY29uc3QgYm9keSA9IHRoaXMuYnVpbGRSZXF1ZXN0KHVybCwgcGFyYW1zKTtcbiAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodGhpcy5vZG9vX3NlcnZlciArIHVybCwgYm9keSwge2hlYWRlcnM6IHRoaXMuaGVhZGVyc30pXG4gICAgICAudG9Qcm9taXNlKClcbiAgICAgIC50aGVuKHRoaXMuaGFuZGxlT2Rvb0Vycm9ycylcbiAgICAgIC5jYXRjaCh0aGlzLmhhbmRsZUh0dHBFcnJvcnMpO1xuICB9XG5cbiAgcHVibGljIGdldFNlcnZlckluZm8oKSB7XG4gICAgcmV0dXJuIHRoaXMuc2VuZFJlcXVlc3QoJy93ZWIvd2ViY2xpZW50L3ZlcnNpb25faW5mbycsIHt9KTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRTZXNzaW9uSW5mbygpIHtcbiAgICByZXR1cm4gdGhpcy5zZW5kUmVxdWVzdCgnL3dlYi9zZXNzaW9uL2dldF9zZXNzaW9uX2luZm8nLCB7fSk7XG4gIH1cblxuICBwdWJsaWMgbG9naW4oZGI6IHN0cmluZywgbG9naW46IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZykge1xuICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgIGRiOiBkYixcbiAgICAgIGxvZ2luOiBsb2dpbixcbiAgICAgIHBhc3N3b3JkOiBwYXNzd29yZFxuICAgIH07XG4gICAgY29uc3QgJHRoaXMgPSB0aGlzO1xuICAgIHJldHVybiB0aGlzLnNlbmRSZXF1ZXN0KCcvd2ViL3Nlc3Npb24vYXV0aGVudGljYXRlJywgcGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQ6IGFueSkge1xuICAgICAgaWYgKCFyZXN1bHQudWlkKSB7XG4gICAgICAgICR0aGlzLmNvb2tpZXMuZGVsZXRlX3Nlc3Npb25JZCgpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3Qoe1xuICAgICAgICAgIHRpdGxlOiAnd3JvbmdfbG9naW4nLFxuICAgICAgICAgIG1lc3NhZ2U6ICdVc2VybmFtZSBhbmQgcGFzc3dvcmQgZG9uXFwndCBtYXRjaCcsXG4gICAgICAgICAgZnVsbFRyYWNlOiByZXN1bHRcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAkdGhpcy5jb250ZXh0ID0gcmVzdWx0LnVzZXJfY29udGV4dDtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyX2NvbnRleHQnLCBKU09OLnN0cmluZ2lmeSgkdGhpcy5jb250ZXh0KSk7XG4gICAgICAkdGhpcy5jb29raWVzLnNldF9zZXNzaW9uSWQocmVzdWx0LnNlc3Npb25faWQpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBpc0xvZ2dlZEluKGZvcmNlOiBib29sZWFuID0gdHJ1ZSkge1xuICAgIGlmICghZm9yY2UpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5jb29raWVzLmdldF9zZXNzaW9uSWQoKS5sZW5ndGggPiAwKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZ2V0U2Vzc2lvbkluZm8oKS50aGVuKChyZXN1bHQ6IGFueSkgPT4ge1xuICAgICAgdGhpcy5jb29raWVzLnNldF9zZXNzaW9uSWQocmVzdWx0LnNlc3Npb25faWQpO1xuICAgICAgcmV0dXJuICEhKHJlc3VsdC51aWQpO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGxvZ291dChmb3JjZTogYm9vbGVhbiA9IHRydWUpIHtcbiAgICB0aGlzLmNvb2tpZXMuZGVsZXRlX3Nlc3Npb25JZCgpO1xuICAgIGlmIChmb3JjZSkge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0U2Vzc2lvbkluZm8oKS50aGVuKChyOiBhbnkpID0+IHsgLy8gZ2V0IGRiIGZyb20gc2Vzc2lvbkluZm9cbiAgICAgICAgaWYgKHIuZGIpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5sb2dpbihyLmRiLCAnJywgJycpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXREYkxpc3QoKSB7IC8vIG9ubHkgdXNlIGZvciBvZG9vIDwgOS4wXG4gICAgcmV0dXJuIHRoaXMuc2VuZFJlcXVlc3QoJy93ZWIvZGF0YWJhc2UvZ2V0X2xpc3QnLCB7fSk7XG4gIH1cblxuICBwdWJsaWMgc2VhcmNoUmVhZChtb2RlbDogc3RyaW5nLCBkb21haW46IGFueSwgZmllbGRzOiBhbnksIGxpbWl0OiBudW1iZXIsIG9mZnNldDogbnVtYmVyLCBjb250ZXh0OiBhbnkgPSB7fSwgc29ydD86IHN0cmluZykge1xuICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgIG1vZGVsOiBtb2RlbCxcbiAgICAgIGRvbWFpbjogZG9tYWluLFxuICAgICAgZmllbGRzOiBmaWVsZHMsXG4gICAgICBsaW1pdDogbGltaXQsXG4gICAgICBvZmZzZXQ6IG9mZnNldCxcbiAgICAgIGNvbnRleHQ6IGNvbnRleHQgfHwgdGhpcy5jb250ZXh0LFxuICAgICAgc29ydDogc29ydCB8fCAnJ1xuICAgIH07XG4gICAgcmV0dXJuIHRoaXMuc2VuZFJlcXVlc3QoJy93ZWIvZGF0YXNldC9zZWFyY2hfcmVhZCcsIHBhcmFtcyk7XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlQ29udGV4dChjb250ZXh0OiBhbnkpIHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlcl9jb250ZXh0JywgSlNPTi5zdHJpbmdpZnkoY29udGV4dCkpO1xuICAgIGNvbnN0IGFyZ3MgPSBbWyg8YW55PnRoaXMuY29udGV4dCkudWlkXSwgY29udGV4dF07XG4gICAgdGhpcy5jYWxsKCdyZXMudXNlcnMnLCAnd3JpdGUnLCBhcmdzLCB7fSlcbiAgICAgIC50aGVuKCgpID0+IHRoaXMuY29udGV4dCA9IGNvbnRleHQpXG4gICAgICAuY2F0Y2goKGVycjogYW55KSA9PiB0aGlzLmNvbnRleHQgPSBjb250ZXh0KTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRDb250ZXh0KCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRleHQ7XG4gIH1cblxuICBwdWJsaWMgZ2V0U2VydmVyKCkge1xuICAgIHJldHVybiB0aGlzLm9kb29fc2VydmVyO1xuICB9XG5cbiAgcHVibGljIGNhbGwobW9kZWw6IHN0cmluZywgbWV0aG9kOiBzdHJpbmcsIGFyZ3M6IGFueSwga3dhcmdzOiBhbnkpIHtcblxuICAgIGt3YXJncyA9IGt3YXJncyB8fCB7fTtcbiAgICBrd2FyZ3MuY29udGV4dCA9IGt3YXJncy5jb250ZXh0IHx8IHt9O1xuICAgICg8YW55Pk9iamVjdCkuYXNzaWduKGt3YXJncy5jb250ZXh0LCB0aGlzLmNvbnRleHQpO1xuXG4gICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgbW9kZWw6IG1vZGVsLFxuICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICBhcmdzOiBhcmdzLFxuICAgICAga3dhcmdzOiBrd2FyZ3MsXG4gICAgfTtcbiAgICByZXR1cm4gdGhpcy5zZW5kUmVxdWVzdCgnL3dlYi9kYXRhc2V0L2NhbGxfa3cnLCBwYXJhbXMpO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZFJlcXVlc3QodXJsOiBzdHJpbmcsIHBhcmFtczogYW55KSB7XG4gICAgdGhpcy51bmlxX2lkX2NvdW50ZXIgKz0gMTtcbiAgICBpZiAodGhpcy5zaG91bGRNYW5hZ2VTZXNzaW9uSWQpIHtcbiAgICAgIHBhcmFtcy5zZXNzaW9uX2lkID0gdGhpcy5jb29raWVzLmdldF9zZXNzaW9uSWQoKTtcbiAgICB9XG5cbiAgICB0aGlzLmhlYWRlcnMgPSBuZXcgSHR0cEhlYWRlcnMoe1xuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICdYLU9wZW5lcnAtU2Vzc2lvbi1JZCc6IHRoaXMuY29va2llcy5nZXRfc2Vzc2lvbklkKCksXG4gICAgICAnQXV0aG9yaXphdGlvbic6ICdCYXNpYyAnICsgYnRvYShgJHt0aGlzLmh0dHBfYXV0aH1gKVxuICAgIH0pO1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICBqc29ucnBjOiAnMi4wJyxcbiAgICAgIG1ldGhvZDogJ2NhbGwnLFxuICAgICAgcGFyYW1zOiBwYXJhbXMsIC8vIHBheWxvYWRcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlT2Rvb0Vycm9ycyhyZXNwb25zZTogYW55KSB7XG4gICAgaWYgKCFyZXNwb25zZS5lcnJvcikge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLnJlc3VsdDtcbiAgICB9XG5cbiAgICBjb25zdCBlcnJvciA9IHJlc3BvbnNlLmVycm9yO1xuICAgIGNvbnN0IGVycm9yT2JqID0ge1xuICAgICAgdGl0bGU6ICcgICAgJyxcbiAgICAgIG1lc3NhZ2U6ICcnLFxuICAgICAgZnVsbFRyYWNlOiBlcnJvclxuICAgIH07XG5cbiAgICBpZiAoZXJyb3IuY29kZSA9PT0gMjAwICYmIGVycm9yLm1lc3NhZ2UgPT09ICdPZG9vIFNlcnZlciBFcnJvcicgJiYgZXJyb3IuZGF0YS5uYW1lID09PSAnd2Vya3pldWcuZXhjZXB0aW9ucy5Ob3RGb3VuZCcpIHtcbiAgICAgIGVycm9yT2JqLnRpdGxlID0gJ3BhZ2Vfbm90X2ZvdW5kJztcbiAgICAgIGVycm9yT2JqLm1lc3NhZ2UgPSAnSFRUUCBFcnJvcic7XG4gICAgfSBlbHNlIGlmICgoZXJyb3IuY29kZSA9PT0gMTAwICYmIGVycm9yLm1lc3NhZ2UgPT09ICdPZG9vIFNlc3Npb24gRXhwaXJlZCcpIHx8IC8vIHY4XG4gICAgICAoZXJyb3IuY29kZSA9PT0gMzAwICYmIGVycm9yLm1lc3NhZ2UgPT09ICdPcGVuRVJQIFdlYkNsaWVudCBFcnJvcicgJiYgZXJyb3IuZGF0YS5kZWJ1Zy5tYXRjaCgnU2Vzc2lvbkV4cGlyZWRFeGNlcHRpb24nKSkgLy8gdjdcbiAgICApIHtcbiAgICAgIGVycm9yT2JqLnRpdGxlID0gJ3Nlc3Npb25fZXhwaXJlZCc7XG4gICAgICB0aGlzLmNvb2tpZXMuZGVsZXRlX3Nlc3Npb25JZCgpO1xuICAgIH0gZWxzZSBpZiAoKGVycm9yLm1lc3NhZ2UgPT09ICdPZG9vIFNlcnZlciBFcnJvcicgJiYgL0ZBVEFMOiAgZGF0YWJhc2UgXCIoLispXCIgZG9lcyBub3QgZXhpc3QvLnRlc3QoZXJyb3IuZGF0YS5tZXNzYWdlKSkpIHtcbiAgICAgIGVycm9yT2JqLnRpdGxlID0gJ2RhdGFiYXNlX25vdF9mb3VuZCc7XG4gICAgICBlcnJvck9iai5tZXNzYWdlID0gZXJyb3IuZGF0YS5tZXNzYWdlO1xuICAgIH0gZWxzZSBpZiAoKGVycm9yLmRhdGEubmFtZSA9PT0gJ29wZW5lcnAuZXhjZXB0aW9ucy5BY2Nlc3NFcnJvcicpKSB7XG4gICAgICBlcnJvck9iai50aXRsZSA9ICdBY2Nlc3NFcnJvcic7XG4gICAgICBlcnJvck9iai5tZXNzYWdlID0gZXJyb3IuZGF0YS5tZXNzYWdlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBzcGxpdCA9ICgnJyArIGVycm9yLmRhdGEuZmF1bHRfY29kZSkuc3BsaXQoJ1xcbicpWzBdLnNwbGl0KCcgLS0gJyk7XG4gICAgICBpZiAoc3BsaXQubGVuZ3RoID4gMSkge1xuICAgICAgICBlcnJvci50eXBlID0gc3BsaXQuc2hpZnQoKTtcbiAgICAgICAgZXJyb3IuZGF0YS5mYXVsdF9jb2RlID0gZXJyb3IuZGF0YS5mYXVsdF9jb2RlLnN1YnN0cihlcnJvci50eXBlLmxlbmd0aCArIDQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXJyb3IuY29kZSA9PT0gMjAwICYmIGVycm9yLnR5cGUpIHtcbiAgICAgICAgZXJyb3JPYmoudGl0bGUgPSBlcnJvci50eXBlO1xuICAgICAgICBlcnJvck9iai5tZXNzYWdlID0gZXJyb3IuZGF0YS5mYXVsdF9jb2RlLnJlcGxhY2UoL1xcbi9nLCAnPGJyIC8+Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlcnJvck9iai50aXRsZSA9IGVycm9yLm1lc3NhZ2U7XG4gICAgICAgIGVycm9yT2JqLm1lc3NhZ2UgPSBlcnJvci5kYXRhLmRlYnVnLnJlcGxhY2UoL1xcbi9nLCAnPGJyIC8+Jyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvck9iaik7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUh0dHBFcnJvcnMoZXJyb3I6IGFueSkge1xuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvci5tZXNzYWdlIHx8IGVycm9yKTtcbiAgfVxuXG59XG4iLCJpbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5ATmdNb2R1bGUoe1xuICBpbXBvcnRzOiBbXG4gIF0sXG59KVxuZXhwb3J0IGNsYXNzIEFuZ3VsYXI2T2Rvb0pzb25ycGNNb2R1bGUgeyB9XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLEFBR0E7OzBCQUMrQixJQUFJOzs7OztJQUVqQyxnQkFBZ0I7UUFDZCxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztRQUN2QixRQUFRLENBQUMsTUFBTSxHQUFHLG9EQUFvRCxDQUFDO0tBQ3hFOzs7O0lBRUQsYUFBYTtRQUNYLE9BQU8sUUFBUTthQUNaLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDO2FBQ2xCLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7YUFDMUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQ3pCLEdBQUcsRUFBRSxJQUFJLElBQUksQ0FBQyxVQUFVLElBQUksRUFBRSxDQUFDO0tBQ25DOzs7OztJQUVELGFBQWEsQ0FBQyxHQUFXO1FBQ3ZCLFFBQVEsQ0FBQyxNQUFNLEdBQUcsY0FBYyxHQUFHLEVBQUUsQ0FBQztRQUN0QyxJQUFJLENBQUMsVUFBVSxHQUFHLEdBQUcsQ0FBQztLQUN2QjtDQUNGOzs7OztJQWVDLFlBQzhCLElBQWdCO1FBQWhCLFNBQUksR0FBSixJQUFJLENBQVk7K0JBUnBCLENBQUM7cUNBQ0ssS0FBSzt1QkFDWCxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxPQUFP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