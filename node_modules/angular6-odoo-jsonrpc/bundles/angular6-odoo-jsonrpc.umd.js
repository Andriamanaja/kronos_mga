(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('@angular/common/http')) :
    typeof define === 'function' && define.amd ? define('angular6-odoo-jsonrpc', ['exports', '@angular/core', '@angular/common/http'], factory) :
    (factory((global['angular6-odoo-jsonrpc'] = {}),global.ng.core,global.ng.common.http));
}(this, (function (exports,i0,i1) { 'use strict';

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var Cookies = (function () {
        function Cookies() {
            this.session_id = null;
        }
        /**
         * @return {?}
         */
        Cookies.prototype.delete_sessionId = /**
         * @return {?}
         */
            function () {
                this.session_id = null;
                document.cookie = 'session_id=; expires=Wed, 29 Jun 2016 00:00:00 UTC';
            };
        /**
         * @return {?}
         */
        Cookies.prototype.get_sessionId = /**
         * @return {?}
         */
            function () {
                return document
                    .cookie.split('; ')
                    .filter(function (x) { return x.indexOf('session_id') === 0; })
                    .map(function (x) { return x.split('=')[1]; })
                    .pop() || this.session_id || '';
            };
        /**
         * @param {?} val
         * @return {?}
         */
        Cookies.prototype.set_sessionId = /**
         * @param {?} val
         * @return {?}
         */
            function (val) {
                document.cookie = "session_id=" + val;
                this.session_id = val;
            };
        return Cookies;
    }());
    var Ng6OdooRPCService = (function () {
        function Ng6OdooRPCService(http) {
            this.http = http;
            this.uniq_id_counter = 0;
            this.shouldManageSessionId = false;
            this.context = JSON.parse(localStorage.getItem('user_context')) || { 'lang': 'en_US' };
            this.cookies = new Cookies();
        }
        /**
         * @param {?} configs
         * @return {?}
         */
        Ng6OdooRPCService.prototype.init = /**
         * @param {?} configs
         * @return {?}
         */
            function (configs) {
                this.odoo_server = configs.odoo_server;
                this.http_auth = configs.http_auth || null;
            };
        /**
         * @param {?} odoo_server
         * @return {?}
         */
        Ng6OdooRPCService.prototype.setOdooServer = /**
         * @param {?} odoo_server
         * @return {?}
         */
            function (odoo_server) {
                this.odoo_server = odoo_server;
            };
        /**
         * @param {?} http_auth
         * @return {?}
         */
        Ng6OdooRPCService.prototype.setHttpAuth = /**
         * @param {?} http_auth
         * @return {?}
         */
            function (http_auth) {
                this.http_auth = http_auth;
            };
        /**
         * @param {?} url
         * @param {?} params
         * @return {?}
         */
        Ng6OdooRPCService.prototype.sendRequest = /**
         * @param {?} url
         * @param {?} params
         * @return {?}
         */
            function (url, params) {
                var /** @type {?} */ body = this.buildRequest(url, params);
                return this.http.post(this.odoo_server + url, body, { headers: this.headers })
                    .toPromise()
                    .then(this.handleOdooErrors)
                    .catch(this.handleHttpErrors);
            };
        /**
         * @return {?}
         */
        Ng6OdooRPCService.prototype.getServerInfo = /**
         * @return {?}
         */
            function () {
                return this.sendRequest('/web/webclient/version_info', {});
            };
        /**
         * @return {?}
         */
        Ng6OdooRPCService.prototype.getSessionInfo = /**
         * @return {?}
         */
            function () {
                return this.sendRequest('/web/session/get_session_info', {});
            };
        /**
         * @param {?} db
         * @param {?} login
         * @param {?} password
         * @return {?}
         */
        Ng6OdooRPCService.prototype.login = /**
         * @param {?} db
         * @param {?} login
         * @param {?} password
         * @return {?}
         */
            function (db, login, password) {
                var /** @type {?} */ params = {
                    db: db,
                    login: login,
                    password: password
                };
                var /** @type {?} */ $this = this;
                return this.sendRequest('/web/session/authenticate', params).then(function (result) {
                    if (!result.uid) {
                        $this.cookies.delete_sessionId();
                        return Promise.reject({
                            title: 'wrong_login',
                            message: 'Username and password don\'t match',
                            fullTrace: result
                        });
                    }
                    $this.context = result.user_context;
                    localStorage.setItem('user_context', JSON.stringify($this.context));
                    $this.cookies.set_sessionId(result.session_id);
                    return result;
                });
            };
        /**
         * @param {?=} force
         * @return {?}
         */
        Ng6OdooRPCService.prototype.isLoggedIn = /**
         * @param {?=} force
         * @return {?}
         */
            function (force) {
                var _this = this;
                if (force === void 0) {
                    force = true;
                }
                if (!force) {
                    return Promise.resolve(this.cookies.get_sessionId().length > 0);
                }
                return this.getSessionInfo().then(function (result) {
                    _this.cookies.set_sessionId(result.session_id);
                    return !!(result.uid);
                });
            };
        /**
         * @param {?=} force
         * @return {?}
         */
        Ng6OdooRPCService.prototype.logout = /**
         * @param {?=} force
         * @return {?}
         */
            function (force) {
                var _this = this;
                if (force === void 0) {
                    force = true;
                }
                this.cookies.delete_sessionId();
                if (force) {
                    return this.getSessionInfo().then(function (r) {
                        // get db from sessionInfo
                        if (r.db) {
                            return _this.login(r.db, '', '');
                        }
                    });
                }
                else {
                    return Promise.resolve();
                }
            };
        /**
         * @return {?}
         */
        Ng6OdooRPCService.prototype.getDbList = /**
         * @return {?}
         */
            function () {
                // only use for odoo < 9.0
                return this.sendRequest('/web/database/get_list', {});
            };
        /**
         * @param {?} model
         * @param {?} domain
         * @param {?} fields
         * @param {?} limit
         * @param {?} offset
         * @param {?=} context
         * @param {?=} sort
         * @return {?}
         */
        Ng6OdooRPCService.prototype.searchRead = /**
         * @param {?} model
         * @param {?} domain
         * @param {?} fields
         * @param {?} limit
         * @param {?} offset
         * @param {?=} context
         * @param {?=} sort
         * @return {?}
         */
            function (model, domain, fields, limit, offset, context, sort) {
                if (context === void 0) {
                    context = {};
                }
                var /** @type {?} */ params = {
                    model: model,
                    domain: domain,
                    fields: fields,
                    limit: limit,
                    offset: offset,
                    context: context || this.context,
                    sort: sort || ''
                };
                return this.sendRequest('/web/dataset/search_read', params);
            };
        /**
         * @param {?} context
         * @return {?}
         */
        Ng6OdooRPCService.prototype.updateContext = /**
         * @param {?} context
         * @return {?}
         */
            function (context) {
                var _this = this;
                localStorage.setItem('user_context', JSON.stringify(context));
                var /** @type {?} */ args = [[((this.context)).uid], context];
                this.call('res.users', 'write', args, {})
                    .then(function () { return _this.context = context; })
                    .catch(function (err) { return _this.context = context; });
            };
        /**
         * @return {?}
         */
        Ng6OdooRPCService.prototype.getContext = /**
         * @return {?}
         */
            function () {
                return this.context;
            };
        /**
         * @return {?}
         */
        Ng6OdooRPCService.prototype.getServer = /**
         * @return {?}
         */
            function () {
                return this.odoo_server;
            };
        /**
         * @param {?} model
         * @param {?} method
         * @param {?} args
         * @param {?} kwargs
         * @return {?}
         */
        Ng6OdooRPCService.prototype.call = /**
         * @param {?} model
         * @param {?} method
         * @param {?} args
         * @param {?} kwargs
         * @return {?}
         */
            function (model, method, args, kwargs) {
                kwargs = kwargs || {};
                kwargs.context = kwargs.context || {};
                ((Object)).assign(kwargs.context, this.context);
                var /** @type {?} */ params = {
                    model: model,
                    method: method,
                    args: args,
                    kwargs: kwargs,
                };
                return this.sendRequest('/web/dataset/call_kw', params);
            };
        /**
         * @param {?} url
         * @param {?} params
         * @return {?}
         */
        Ng6OdooRPCService.prototype.buildRequest = /**
         * @param {?} url
         * @param {?} params
         * @return {?}
         */
            function (url, params) {
                this.uniq_id_counter += 1;
                if (this.shouldManageSessionId) {
                    params.session_id = this.cookies.get_sessionId();
                }
                this.headers = new i1.HttpHeaders({
                    'Content-Type': 'application/json',
                    'X-Openerp-Session-Id': this.cookies.get_sessionId(),
                    'Authorization': 'Basic ' + btoa("" + this.http_auth)
                });
                return JSON.stringify({
                    jsonrpc: '2.0',
                    method: 'call',
                    params: params,
                });
            };
        /**
         * @param {?} response
         * @return {?}
         */
        Ng6OdooRPCService.prototype.handleOdooErrors = /**
         * @param {?} response
         * @return {?}
         */
            function (response) {
                if (!response.error) {
                    return response.result;
                }
                var /** @type {?} */ error = response.error;
                var /** @type {?} */ errorObj = {
                    title: '    ',
                    message: '',
                    fullTrace: error
                };
                if (error.code === 200 && error.message === 'Odoo Server Error' && error.data.name === 'werkzeug.exceptions.NotFound') {
                    errorObj.title = 'page_not_found';
                    errorObj.message = 'HTTP Error';
                }
                else if ((error.code === 100 && error.message === 'Odoo Session Expired') || // v8
                    // v8
                    (error.code === 300 && error.message === 'OpenERP WebClient Error' && error.data.debug.match('SessionExpiredException')) // v7
                ) {
                    errorObj.title = 'session_expired';
                    this.cookies.delete_sessionId();
                }
                else if ((error.message === 'Odoo Server Error' && /FATAL:  database "(.+)" does not exist/.test(error.data.message))) {
                    errorObj.title = 'database_not_found';
                    errorObj.message = error.data.message;
                }
                else if ((error.data.name === 'openerp.exceptions.AccessError')) {
                    errorObj.title = 'AccessError';
                    errorObj.message = error.data.message;
                }
                else {
                    var /** @type {?} */ split = ('' + error.data.fault_code).split('\n')[0].split(' -- ');
                    if (split.length > 1) {
                        error.type = split.shift();
                        error.data.fault_code = error.data.fault_code.substr(error.type.length + 4);
                    }
                    if (error.code === 200 && error.type) {
                        errorObj.title = error.type;
                        errorObj.message = error.data.fault_code.replace(/\n/g, '<br />');
                    }
                    else {
                        errorObj.title = error.message;
                        errorObj.message = error.data.debug.replace(/\n/g, '<br />');
                    }
                }
                return Promise.reject(errorObj);
            };
        /**
         * @param {?} error
         * @return {?}
         */
        Ng6OdooRPCService.prototype.handleHttpErrors = /**
         * @param {?} error
         * @return {?}
         */
            function (error) {
                return Promise.reject(error.message || error);
            };
        Ng6OdooRPCService.decorators = [
            { type: i0.Injectable, args: [{
                        providedIn: 'root'
                    },] },
        ];
        /** @nocollapse */
        Ng6OdooRPCService.ctorParameters = function () {
            return [
                { type: i1.HttpClient, decorators: [{ type: i0.Inject, args: [i1.HttpClient,] }] }
            ];
        };
        /** @nocollapse */ Ng6OdooRPCService.ngInjectableDef = i0.defineInjectable({ factory: function Ng6OdooRPCService_Factory() { return new Ng6OdooRPCService(i0.inject(i1.HttpClient)); }, token: Ng6OdooRPCService, providedIn: "root" });
        return Ng6OdooRPCService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var Angular6OdooJsonrpcModule = (function () {
        function Angular6OdooJsonrpcModule() {
        }
        Angular6OdooJsonrpcModule.decorators = [
            { type: i0.NgModule, args: [{
                        imports: [],
                    },] },
        ];
        return Angular6OdooJsonrpcModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */

    exports.Ng6OdooRPCService = Ng6OdooRPCService;
    exports.Angular6OdooJsonrpcModule = Angular6OdooJsonrpcModule;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5ndWxhcjYtb2Rvby1qc29ucnBjLnVtZC5qcy5tYXAiLCJzb3VyY2VzIjpbIm5nOi8vYW5ndWxhcjYtb2Rvby1qc29ucnBjL2xpYi9hbmd1bGFyNi1vZG9vLWpzb25ycGMuc2VydmljZS50cyIsIm5nOi8vYW5ndWxhcjYtb2Rvby1qc29ucnBjL2xpYi9hbmd1bGFyNi1vZG9vLWpzb25ycGMubW9kdWxlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7SW5qZWN0LCBJbmplY3RhYmxlfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7SHR0cENsaWVudCwgSHR0cEhlYWRlcnN9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcblxuY2xhc3MgQ29va2llcyB7IC8vIGNvb2tpZXMgZG9lc24ndCB3b3JrIHdpdGggQW5kcm9pZCBkZWZhdWx0IGJyb3dzZXIgLyBJb25pY1xuICBwcml2YXRlIHNlc3Npb25faWQ6IHN0cmluZyA9IG51bGw7XG5cbiAgZGVsZXRlX3Nlc3Npb25JZCgpIHtcbiAgICB0aGlzLnNlc3Npb25faWQgPSBudWxsO1xuICAgIGRvY3VtZW50LmNvb2tpZSA9ICdzZXNzaW9uX2lkPTsgZXhwaXJlcz1XZWQsIDI5IEp1biAyMDE2IDAwOjAwOjAwIFVUQyc7XG4gIH1cblxuICBnZXRfc2Vzc2lvbklkKCkge1xuICAgIHJldHVybiBkb2N1bWVudFxuICAgICAgLmNvb2tpZS5zcGxpdCgnOyAnKVxuICAgICAgLmZpbHRlcih4ID0+IHguaW5kZXhPZignc2Vzc2lvbl9pZCcpID09PSAwKVxuICAgICAgLm1hcCh4ID0+IHguc3BsaXQoJz0nKVsxXSlcbiAgICAgIC5wb3AoKSB8fCB0aGlzLnNlc3Npb25faWQgfHwgJyc7XG4gIH1cblxuICBzZXRfc2Vzc2lvbklkKHZhbDogc3RyaW5nKSB7XG4gICAgZG9jdW1lbnQuY29va2llID0gYHNlc3Npb25faWQ9JHt2YWx9YDtcbiAgICB0aGlzLnNlc3Npb25faWQgPSB2YWw7XG4gIH1cbn1cblxuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBOZzZPZG9vUlBDU2VydmljZSB7XG4gIHByaXZhdGUgY29va2llczogQ29va2llcztcbiAgcHJpdmF0ZSB1bmlxX2lkX2NvdW50ZXIgPSAwO1xuICBwcml2YXRlIHNob3VsZE1hbmFnZVNlc3Npb25JZCA9IGZhbHNlOyAvLyB0cnkgd2l0aG91dCBmaXJzdFxuICBwcml2YXRlIGNvbnRleHQ6IE9iamVjdCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJfY29udGV4dCcpKSB8fCB7J2xhbmcnOiAnZW5fVVMnfTtcbiAgcHJpdmF0ZSBoZWFkZXJzOiBIdHRwSGVhZGVycztcbiAgcHJpdmF0ZSBodHRwX2F1dGg6IHN0cmluZztcbiAgcHJpdmF0ZSBvZG9vX3NlcnZlcjogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIEBJbmplY3QoSHR0cENsaWVudCkgcHJpdmF0ZSBodHRwOiBIdHRwQ2xpZW50KSB7XG4gICAgdGhpcy5jb29raWVzID0gbmV3IENvb2tpZXMoKTtcbiAgfVxuXG4gIHB1YmxpYyBpbml0KGNvbmZpZ3M6IGFueSkge1xuICAgIHRoaXMub2Rvb19zZXJ2ZXIgPSBjb25maWdzLm9kb29fc2VydmVyO1xuICAgIHRoaXMuaHR0cF9hdXRoID0gY29uZmlncy5odHRwX2F1dGggfHwgbnVsbDtcbiAgfVxuXG4gIHB1YmxpYyBzZXRPZG9vU2VydmVyKG9kb29fc2VydmVyOiBzdHJpbmcpIHtcbiAgICB0aGlzLm9kb29fc2VydmVyID0gb2Rvb19zZXJ2ZXI7XG4gIH1cblxuICBwdWJsaWMgc2V0SHR0cEF1dGgoaHR0cF9hdXRoOiBzdHJpbmcpIHtcbiAgICB0aGlzLmh0dHBfYXV0aCA9IGh0dHBfYXV0aDtcbiAgfVxuXG4gIHB1YmxpYyBzZW5kUmVxdWVzdCh1cmw6IHN0cmluZywgcGFyYW1zOiBPYmplY3QpOiBQcm9taXNlPGFueT4ge1xuICAgIGNvbnN0IGJvZHkgPSB0aGlzLmJ1aWxkUmVxdWVzdCh1cmwsIHBhcmFtcyk7XG4gICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KHRoaXMub2Rvb19zZXJ2ZXIgKyB1cmwsIGJvZHksIHtoZWFkZXJzOiB0aGlzLmhlYWRlcnN9KVxuICAgICAgLnRvUHJvbWlzZSgpXG4gICAgICAudGhlbih0aGlzLmhhbmRsZU9kb29FcnJvcnMpXG4gICAgICAuY2F0Y2godGhpcy5oYW5kbGVIdHRwRXJyb3JzKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRTZXJ2ZXJJbmZvKCkge1xuICAgIHJldHVybiB0aGlzLnNlbmRSZXF1ZXN0KCcvd2ViL3dlYmNsaWVudC92ZXJzaW9uX2luZm8nLCB7fSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0U2Vzc2lvbkluZm8oKSB7XG4gICAgcmV0dXJuIHRoaXMuc2VuZFJlcXVlc3QoJy93ZWIvc2Vzc2lvbi9nZXRfc2Vzc2lvbl9pbmZvJywge30pO1xuICB9XG5cbiAgcHVibGljIGxvZ2luKGRiOiBzdHJpbmcsIGxvZ2luOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcpIHtcbiAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICBkYjogZGIsXG4gICAgICBsb2dpbjogbG9naW4sXG4gICAgICBwYXNzd29yZDogcGFzc3dvcmRcbiAgICB9O1xuICAgIGNvbnN0ICR0aGlzID0gdGhpcztcbiAgICByZXR1cm4gdGhpcy5zZW5kUmVxdWVzdCgnL3dlYi9zZXNzaW9uL2F1dGhlbnRpY2F0ZScsIHBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzdWx0OiBhbnkpIHtcbiAgICAgIGlmICghcmVzdWx0LnVpZCkge1xuICAgICAgICAkdGhpcy5jb29raWVzLmRlbGV0ZV9zZXNzaW9uSWQoKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHtcbiAgICAgICAgICB0aXRsZTogJ3dyb25nX2xvZ2luJyxcbiAgICAgICAgICBtZXNzYWdlOiAnVXNlcm5hbWUgYW5kIHBhc3N3b3JkIGRvblxcJ3QgbWF0Y2gnLFxuICAgICAgICAgIGZ1bGxUcmFjZTogcmVzdWx0XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgJHRoaXMuY29udGV4dCA9IHJlc3VsdC51c2VyX2NvbnRleHQ7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlcl9jb250ZXh0JywgSlNPTi5zdHJpbmdpZnkoJHRoaXMuY29udGV4dCkpO1xuICAgICAgJHRoaXMuY29va2llcy5zZXRfc2Vzc2lvbklkKHJlc3VsdC5zZXNzaW9uX2lkKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgaXNMb2dnZWRJbihmb3JjZTogYm9vbGVhbiA9IHRydWUpIHtcbiAgICBpZiAoIWZvcmNlKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuY29va2llcy5nZXRfc2Vzc2lvbklkKCkubGVuZ3RoID4gMCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmdldFNlc3Npb25JbmZvKCkudGhlbigocmVzdWx0OiBhbnkpID0+IHtcbiAgICAgIHRoaXMuY29va2llcy5zZXRfc2Vzc2lvbklkKHJlc3VsdC5zZXNzaW9uX2lkKTtcbiAgICAgIHJldHVybiAhIShyZXN1bHQudWlkKTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBsb2dvdXQoZm9yY2U6IGJvb2xlYW4gPSB0cnVlKSB7XG4gICAgdGhpcy5jb29raWVzLmRlbGV0ZV9zZXNzaW9uSWQoKTtcbiAgICBpZiAoZm9yY2UpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldFNlc3Npb25JbmZvKCkudGhlbigocjogYW55KSA9PiB7IC8vIGdldCBkYiBmcm9tIHNlc3Npb25JbmZvXG4gICAgICAgIGlmIChyLmRiKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMubG9naW4oci5kYiwgJycsICcnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZ2V0RGJMaXN0KCkgeyAvLyBvbmx5IHVzZSBmb3Igb2RvbyA8IDkuMFxuICAgIHJldHVybiB0aGlzLnNlbmRSZXF1ZXN0KCcvd2ViL2RhdGFiYXNlL2dldF9saXN0Jywge30pO1xuICB9XG5cbiAgcHVibGljIHNlYXJjaFJlYWQobW9kZWw6IHN0cmluZywgZG9tYWluOiBhbnksIGZpZWxkczogYW55LCBsaW1pdDogbnVtYmVyLCBvZmZzZXQ6IG51bWJlciwgY29udGV4dDogYW55ID0ge30sIHNvcnQ/OiBzdHJpbmcpIHtcbiAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICBtb2RlbDogbW9kZWwsXG4gICAgICBkb21haW46IGRvbWFpbixcbiAgICAgIGZpZWxkczogZmllbGRzLFxuICAgICAgbGltaXQ6IGxpbWl0LFxuICAgICAgb2Zmc2V0OiBvZmZzZXQsXG4gICAgICBjb250ZXh0OiBjb250ZXh0IHx8IHRoaXMuY29udGV4dCxcbiAgICAgIHNvcnQ6IHNvcnQgfHwgJydcbiAgICB9O1xuICAgIHJldHVybiB0aGlzLnNlbmRSZXF1ZXN0KCcvd2ViL2RhdGFzZXQvc2VhcmNoX3JlYWQnLCBwYXJhbXMpO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZUNvbnRleHQoY29udGV4dDogYW55KSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXJfY29udGV4dCcsIEpTT04uc3RyaW5naWZ5KGNvbnRleHQpKTtcbiAgICBjb25zdCBhcmdzID0gW1soPGFueT50aGlzLmNvbnRleHQpLnVpZF0sIGNvbnRleHRdO1xuICAgIHRoaXMuY2FsbCgncmVzLnVzZXJzJywgJ3dyaXRlJywgYXJncywge30pXG4gICAgICAudGhlbigoKSA9PiB0aGlzLmNvbnRleHQgPSBjb250ZXh0KVxuICAgICAgLmNhdGNoKChlcnI6IGFueSkgPT4gdGhpcy5jb250ZXh0ID0gY29udGV4dCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0Q29udGV4dCgpIHtcbiAgICByZXR1cm4gdGhpcy5jb250ZXh0O1xuICB9XG5cbiAgcHVibGljIGdldFNlcnZlcigpIHtcbiAgICByZXR1cm4gdGhpcy5vZG9vX3NlcnZlcjtcbiAgfVxuXG4gIHB1YmxpYyBjYWxsKG1vZGVsOiBzdHJpbmcsIG1ldGhvZDogc3RyaW5nLCBhcmdzOiBhbnksIGt3YXJnczogYW55KSB7XG5cbiAgICBrd2FyZ3MgPSBrd2FyZ3MgfHwge307XG4gICAga3dhcmdzLmNvbnRleHQgPSBrd2FyZ3MuY29udGV4dCB8fCB7fTtcbiAgICAoPGFueT5PYmplY3QpLmFzc2lnbihrd2FyZ3MuY29udGV4dCwgdGhpcy5jb250ZXh0KTtcblxuICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgIG1vZGVsOiBtb2RlbCxcbiAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgYXJnczogYXJncyxcbiAgICAgIGt3YXJnczoga3dhcmdzLFxuICAgIH07XG4gICAgcmV0dXJuIHRoaXMuc2VuZFJlcXVlc3QoJy93ZWIvZGF0YXNldC9jYWxsX2t3JywgcGFyYW1zKTtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRSZXF1ZXN0KHVybDogc3RyaW5nLCBwYXJhbXM6IGFueSkge1xuICAgIHRoaXMudW5pcV9pZF9jb3VudGVyICs9IDE7XG4gICAgaWYgKHRoaXMuc2hvdWxkTWFuYWdlU2Vzc2lvbklkKSB7XG4gICAgICBwYXJhbXMuc2Vzc2lvbl9pZCA9IHRoaXMuY29va2llcy5nZXRfc2Vzc2lvbklkKCk7XG4gICAgfVxuXG4gICAgdGhpcy5oZWFkZXJzID0gbmV3IEh0dHBIZWFkZXJzKHtcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAnWC1PcGVuZXJwLVNlc3Npb24tSWQnOiB0aGlzLmNvb2tpZXMuZ2V0X3Nlc3Npb25JZCgpLFxuICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmFzaWMgJyArIGJ0b2EoYCR7dGhpcy5odHRwX2F1dGh9YClcbiAgICB9KTtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAganNvbnJwYzogJzIuMCcsXG4gICAgICBtZXRob2Q6ICdjYWxsJyxcbiAgICAgIHBhcmFtczogcGFyYW1zLCAvLyBwYXlsb2FkXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZU9kb29FcnJvcnMocmVzcG9uc2U6IGFueSkge1xuICAgIGlmICghcmVzcG9uc2UuZXJyb3IpIHtcbiAgICAgIHJldHVybiByZXNwb25zZS5yZXN1bHQ7XG4gICAgfVxuXG4gICAgY29uc3QgZXJyb3IgPSByZXNwb25zZS5lcnJvcjtcbiAgICBjb25zdCBlcnJvck9iaiA9IHtcbiAgICAgIHRpdGxlOiAnICAgICcsXG4gICAgICBtZXNzYWdlOiAnJyxcbiAgICAgIGZ1bGxUcmFjZTogZXJyb3JcbiAgICB9O1xuXG4gICAgaWYgKGVycm9yLmNvZGUgPT09IDIwMCAmJiBlcnJvci5tZXNzYWdlID09PSAnT2RvbyBTZXJ2ZXIgRXJyb3InICYmIGVycm9yLmRhdGEubmFtZSA9PT0gJ3dlcmt6ZXVnLmV4Y2VwdGlvbnMuTm90Rm91bmQnKSB7XG4gICAgICBlcnJvck9iai50aXRsZSA9ICdwYWdlX25vdF9mb3VuZCc7XG4gICAgICBlcnJvck9iai5tZXNzYWdlID0gJ0hUVFAgRXJyb3InO1xuICAgIH0gZWxzZSBpZiAoKGVycm9yLmNvZGUgPT09IDEwMCAmJiBlcnJvci5tZXNzYWdlID09PSAnT2RvbyBTZXNzaW9uIEV4cGlyZWQnKSB8fCAvLyB2OFxuICAgICAgKGVycm9yLmNvZGUgPT09IDMwMCAmJiBlcnJvci5tZXNzYWdlID09PSAnT3BlbkVSUCBXZWJDbGllbnQgRXJyb3InICYmIGVycm9yLmRhdGEuZGVidWcubWF0Y2goJ1Nlc3Npb25FeHBpcmVkRXhjZXB0aW9uJykpIC8vIHY3XG4gICAgKSB7XG4gICAgICBlcnJvck9iai50aXRsZSA9ICdzZXNzaW9uX2V4cGlyZWQnO1xuICAgICAgdGhpcy5jb29raWVzLmRlbGV0ZV9zZXNzaW9uSWQoKTtcbiAgICB9IGVsc2UgaWYgKChlcnJvci5tZXNzYWdlID09PSAnT2RvbyBTZXJ2ZXIgRXJyb3InICYmIC9GQVRBTDogIGRhdGFiYXNlIFwiKC4rKVwiIGRvZXMgbm90IGV4aXN0Ly50ZXN0KGVycm9yLmRhdGEubWVzc2FnZSkpKSB7XG4gICAgICBlcnJvck9iai50aXRsZSA9ICdkYXRhYmFzZV9ub3RfZm91bmQnO1xuICAgICAgZXJyb3JPYmoubWVzc2FnZSA9IGVycm9yLmRhdGEubWVzc2FnZTtcbiAgICB9IGVsc2UgaWYgKChlcnJvci5kYXRhLm5hbWUgPT09ICdvcGVuZXJwLmV4Y2VwdGlvbnMuQWNjZXNzRXJyb3InKSkge1xuICAgICAgZXJyb3JPYmoudGl0bGUgPSAnQWNjZXNzRXJyb3InO1xuICAgICAgZXJyb3JPYmoubWVzc2FnZSA9IGVycm9yLmRhdGEubWVzc2FnZTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc3BsaXQgPSAoJycgKyBlcnJvci5kYXRhLmZhdWx0X2NvZGUpLnNwbGl0KCdcXG4nKVswXS5zcGxpdCgnIC0tICcpO1xuICAgICAgaWYgKHNwbGl0Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZXJyb3IudHlwZSA9IHNwbGl0LnNoaWZ0KCk7XG4gICAgICAgIGVycm9yLmRhdGEuZmF1bHRfY29kZSA9IGVycm9yLmRhdGEuZmF1bHRfY29kZS5zdWJzdHIoZXJyb3IudHlwZS5sZW5ndGggKyA0KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGVycm9yLmNvZGUgPT09IDIwMCAmJiBlcnJvci50eXBlKSB7XG4gICAgICAgIGVycm9yT2JqLnRpdGxlID0gZXJyb3IudHlwZTtcbiAgICAgICAgZXJyb3JPYmoubWVzc2FnZSA9IGVycm9yLmRhdGEuZmF1bHRfY29kZS5yZXBsYWNlKC9cXG4vZywgJzxiciAvPicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZXJyb3JPYmoudGl0bGUgPSBlcnJvci5tZXNzYWdlO1xuICAgICAgICBlcnJvck9iai5tZXNzYWdlID0gZXJyb3IuZGF0YS5kZWJ1Zy5yZXBsYWNlKC9cXG4vZywgJzxiciAvPicpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3JPYmopO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVIdHRwRXJyb3JzKGVycm9yOiBhbnkpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IubWVzc2FnZSB8fCBlcnJvcik7XG4gIH1cblxufVxuIiwiaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuQE5nTW9kdWxlKHtcbiAgaW1wb3J0czogW1xuICBdLFxufSlcbmV4cG9ydCBjbGFzcyBBbmd1bGFyNk9kb29Kc29ucnBjTW9kdWxlIHsgfVxuIl0sIm5hbWVzIjpbIkh0dHBIZWFkZXJzIiwiSW5qZWN0YWJsZSIsIkh0dHBDbGllbnQiLCJJbmplY3QiLCJOZ01vZHVsZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLElBR0EsSUFBQTs7OEJBQytCLElBQUk7Ozs7O1FBRWpDLGtDQUFnQjs7O1lBQWhCO2dCQUNFLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO2dCQUN2QixRQUFRLENBQUMsTUFBTSxHQUFHLG9EQUFvRCxDQUFDO2FBQ3hFOzs7O1FBRUQsK0JBQWE7OztZQUFiO2dCQUNFLE9BQU8sUUFBUTtxQkFDWixNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQztxQkFDbEIsTUFBTSxDQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLEdBQUEsQ0FBQztxQkFDMUMsR0FBRyxDQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBQSxDQUFDO3FCQUN6QixHQUFHLEVBQUUsSUFBSSxJQUFJLENBQUMsVUFBVSxJQUFJLEVBQUUsQ0FBQzthQUNuQzs7Ozs7UUFFRCwrQkFBYTs7OztZQUFiLFVBQWMsR0FBVztnQkFDdkIsUUFBUSxDQUFDLE1BQU0sR0FBRyxnQkFBYyxHQUFLLENBQUM7Z0JBQ3RDLElBQUksQ0FBQyxVQUFVLEdBQUcs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